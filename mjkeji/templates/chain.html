{% extends 'base.html' %}
{% block content %}
            <div class="top-image" style="margin-top: 0%;">
              <div class="container-fluid">
                <form>
                  <div class="form-group col-md-3">
                    <label for="sel1">生产线</label>
                    <select class="form-control" id="sel1" >
                      <option>生产线1</option>
                      <option>生产线2</option>
                      <option>生产线3</option>
                      <option>生产线4</option>
                    </select>
                  </div>
                  <br>
                  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<button class="btn btn-info" id="start">采集</button>
                </form>
              </div>
              <div style='margin-top: 2%;'>
              <ul class="nav nav-pills">
                <li role="presentation"><a href="index">机器温度</a></li>
                <li role="presentation"><a href="temperature">环境状况</a></li>
                <li role="presentation"><a href="noise">噪声情况</a></li>
                <li role="presentation"><a href="strap">皮带情况</a></li>
                <li role="presentation" class='active'><a href="chain">链条情况</a></li>
                <li role="presentation"><a href="motor_current">电机电流</a></li>
              </ul>
              </div>
            
              <div class="left-image">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-6">
                      <div id="temperature" style="width: 600px;height:350px;">sadasd</div>
                    </div>
                
                  </div>
                </div>
              </div>
            </div>
 {% endblock %}
 {% block script %}
<script type="text/javascript">

  var myChart = echarts.init(document.getElementById('temperature'));
    var app ={
      xdata:[],
      yvalue:[]
    };
    $(document).ready(function(){
      getData();
      console.log(app.xdata)
      console.log(app.yvalue)
    });
    function getData() {
      $.ajax({
        url:'echarts_c',
        data:{},
        type:'POST',
        async:false,
        data:'json',
        success:function(data){
          app.xdata = data.xtime;
          app.yvalue = data.yv;
          myChart.setOption({
            title: {
              text: '频率'
            },
            tooltip: {},
            legend: {
              data:['频率']
            },
            xAxis: {
              type: 'category',
              boundaryGap: false,
              data: app.xdata
            },
            yAxis: {
              type:'value',
              axisLabel:{
                formatter:'{value}HZ'
              },
              min:0,
              max:60,
              splitLine:{
                line:3,
                lineStyle:{

                  color:['#aaa', '#ddd']
                }
              },
            },
            series: [{
              name: '频率',
              type: 'line',
              data: app.yvalue,
              smooth:true,
              markLine: {
                // animation = true,
                data : [{
                
                silent:true,             //鼠标悬停事件  true没有，false有
                    label:{
                    position:'end', //end对应的值显示在警戒线的后面，start显示在前面（y轴上）
                    formatter:"低温预警"  //和y轴对应的数值
                },
                yAxis:5         // 警戒线的标注值，可以有多个yAxis,多条警示线   或者采用   {type : 'average', name: '平均值'}，type值有  max  min  average，分为最大，最小，平均值
               
            },
            {
                
                silent:true,             //鼠标悬停事件  true没有，false有
                    label:{
                    position:'end', //end对应的值显示在警戒线的后面，start显示在前面（y轴上）
                    formatter:"高温预警"  //和y轴对应的数值
                },
                yAxis:35         // 警戒线的标注值，可以有多个yAxis,多条警示线   或者采用   {type : 'average', name: '平均值'}，type值有  max  min  average，分为最大，最小，平均值
               
            },
            ]
            },
              itemStyle : {  
                            
            },
              areaStyle: {}
            }]
          })
        },
        error:function (msg) {
                alert(msg)
                console.log(msg);
                alert('系统发生错误');
            }
      })
    }

</script>
{% endblock %}