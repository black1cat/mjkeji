{% extends 'base.html' %}
{% block content %}
            <div class="top-image" style="margin-top: 0%;">
              <div class="container-fluid">
                <form>
                  <div class="form-group col-md-3">
                    <label for="sel1">生产线</label>
                    <select class="form-control" id="sel1" >
                      <option>生产线1</option>
                      <option>生产线2</option>
                      <option>生产线3</option>
                      <option>生产线4</option>
                    </select>
                  </div>
                  <br>
                  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<button class="btn btn-info" id="start">采集</button>
                </form>
              </div>
              <div style='margin-top: 2%;'>
                <ul class="nav nav-pills">
                  <li role="presentation" class="active"><a href="index">机器温度</a></li>
                  <li role="presentation"><a href="temperature">环境状况</a></li>
                  <li role="presentation"><a href="noise">噪声情况</a></li>
                  <li role="presentation"><a href="strap">皮带情况</a></li>
                  <li role="presentation"><a href="chain">链条情况</a></li>
                </ul>
              </div>
              <div class="left-image">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-6">
                      <div id="temperature" style="width: 600px;height:350px;"></div>
                    </div>
                
                  </div>
                </div>
              </div>
              </div>
{% endblock %}  
{% block script %}
<script type="text/javascript">
  // 基于准备好的dom，初始化echarts实例
  window.onload = function(){
    var myChart = echarts.init(document.getElementById('temperature'));
    $.ajax({
            type:"GET",
            url:"test",
            data:"data",
            success:function(msg){
                // 获取数据并保存至变量
                var data_list = msg;
                var x_data = new Array();
                var y_data = new Array();
                for(var i=0;i<data_list.length;i++){
                    x_data.push(data_list[i].time);
                    y_data.push(data_list[i].temperature)
                };
    var option1 = {
    title: {
      text: '温度'
    },
    tooltip: {},
    legend: {
      data:['温度']
    },
    xAxis: {
      data: x_data
    },
    yAxis: {},
    series: [{
      name: '温度',
      type: 'line',
      data: y_data
    }]
  };
  myChart.setOption(option);

},
error:function(htmlhttp){
    alert(htmlhttp.status)
}
})
  }
  

  // 指定图表的配置项和数据
 
  // 使用刚指定的配置项和数据显示图表。
  myChart.setOption(option1);
 

</script>
{% endblock %}
